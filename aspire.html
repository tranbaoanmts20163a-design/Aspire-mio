<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aspire AI - Arial Scientific</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Thiết lập toàn bộ phông chữ là Arial */
        * {
            font-family: Arial, Helvetica, sans-serif !important;
        }

        body {
            font-weight: 400;
            background-color: #FFFFFF;
            color: #1A1A1A;
            margin: 0;
            overflow: hidden;
        }

        /* Logo AI chính thức */
        .ai-logo-container {
            width: 32px;
            height: 32px;
            background-color: #0F172A;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .ai-logo-icon {
            width: 16px;
            height: 16px;
            color: white;
            fill: currentColor;
        }

        /* Loading animation */
        .loading-container {
            position: relative;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .spin-wrapper {
            position: absolute;
            width: 100%;
            height: 100%;
            animation: spin-slow 2s linear infinite;
        }

        @keyframes spin-slow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .dot {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: #1A1A1A;
            animation: merge-expand 1.8s infinite cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes merge-expand {
            0%, 100% { transform: translate(0, 0) scale(1); opacity: 1; }
            40% { transform: translate(var(--tx), var(--ty)) scale(0.4); opacity: 0.4; }
            50% { transform: translate(11px, 11px) scale(0.1); opacity: 0.9; }
            75% { transform: translate(0, 0) scale(1.4); opacity: 1; }
        }

        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #EFEFEF; border-radius: 20px; }

        .fade-in {
            animation: fade-up 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }

        @keyframes fade-up { 
            from { opacity: 0; transform: translateY(10px); } 
            to { opacity: 1; transform: translateY(0); } 
        }

        /* Input Bar: Sáng, Nổi, Không viền */
        .input-wrapper {
            background-color: #FFFFFF;
            border-radius: 35px;
            padding: 16px 28px;
            position: relative;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            border: none;
            box-shadow: 0 12px 45px -5px rgba(0,0,0,0.12);
        }

        .input-wrapper:focus-within {
            transform: translateY(-3px);
            box-shadow: 0 25px 60px -15px rgba(0,0,0,0.18);
        }

        .send-button-circle {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            background-color: #F3F3F3;
            color: #C0C0C0;
        }

        .send-button-circle.active {
            background-color: #000000;
            color: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .logo-text {
            font-size: 22px;
            font-weight: 700;
            letter-spacing: -0.04em;
            color: #1A1A1A;
        }
    </style>
</head>
<body class="h-screen flex flex-col">

    <header class="h-16 flex items-center justify-between px-10 bg-white/80 backdrop-blur-md z-50">
        <div class="flex items-center gap-2.5">
            <div class="ai-logo-container" style="width: 28px; height: 28px;">
                <svg class="ai-logo-icon" style="width: 14px; height: 14px;" viewBox="0 0 24 24">
                    <path d="M12 2L14.5 9.5L22 12L14.5 14.5L12 22L9.5 14.5L2 12L9.5 9.5L12 2Z" />
                </svg>
            </div>
            <span class="logo-text">Aspire</span>
        </div>
        <div class="flex items-center gap-8">
            <button class="text-[13px] text-gray-400 hover:text-black transition-colors">Lịch sử</button>
            <button class="px-6 py-2 rounded-full text-[13px] text-white bg-black hover:opacity-85 transition-all font-bold">
                Đăng nhập
            </button>
        </div>
    </header>

    <main id="chatContainer" class="flex-1 overflow-y-auto custom-scrollbar flex flex-col items-center w-full pb-48">
        <div id="greetingArea" class="w-full max-w-2xl flex-1 flex flex-col justify-center px-8 fade-in h-full min-h-[55vh]">
            <h1 class="text-[44px] font-bold mb-2 text-[#1A1A1A] tracking-tight">Xin chào!</h1>
            <h2 class="text-[32px] text-[#E5E5E5] leading-tight max-w-lg font-medium">Hôm nay bạn muốn học gì cùng Aspire?</h2>
        </div>

        <div id="messagesList" class="hidden w-full max-w-3xl py-12 px-8 flex flex-col space-y-12"></div>

        <div id="aiLoading" class="hidden w-full max-w-3xl px-8 flex justify-start fade-in">
            <div class="flex gap-5 items-center">
                <div class="ai-logo-container">
                    <svg class="ai-logo-icon" viewBox="0 0 24 24">
                        <path d="M12 2L14.5 9.5L22 12L14.5 14.5L12 22L9.5 14.5L2 12L9.5 9.5L12 2Z" />
                    </svg>
                </div>
                <div class="loading-container">
                    <div class="spin-wrapper">
                        <div class="dot" style="top:0; left:0; --tx: 7px; --ty: 7px;"></div>
                        <div class="dot" style="top:0; right:0; --tx: -7px; --ty: 7px;"></div>
                        <div class="dot" style="bottom:0; left:0; --tx: 7px; --ty: -7px;"></div>
                        <div class="dot" style="bottom:0; right:0; --tx: -7px; --ty: -7px;"></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="fixed bottom-0 left-0 w-full flex flex-col items-center px-8 pb-10 pt-4 bg-gradient-to-t from-white via-white to-transparent">
        <div class="w-full max-w-3xl"> 
            <div class="input-wrapper flex items-center gap-4">
                <textarea
                    id="userInput"
                    rows="1"
                    placeholder="Nhập câu hỏi nghiên cứu..."
                    class="flex-1 bg-transparent border-none focus:ring-0 text-[#1A1A1A] text-[17px] placeholder:text-[#D1D1D1] resize-none outline-none py-1"
                ></textarea>
                
                <button id="sendBtn" class="send-button-circle shrink-0" disabled>
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                </button>
            </div>
            <div class="mt-5 flex justify-center gap-6 opacity-30">
                <span class="text-[9px] tracking-[0.3em] uppercase font-bold text-gray-500">ASPIRE KNOWLEDGE SYSTEM</span>
            </div>
        </div>
    </footer>

    <script>
        const chatContainer = document.getElementById('chatContainer');
        const greetingArea = document.getElementById('greetingArea');
        const messagesList = document.getElementById('messagesList');
        const aiLoading = document.getElementById('aiLoading');
        const userInput = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');
        
        // API KEY ĐÃ ĐƯỢC CẬP NHẬT
        const apiKey = "AIzaSyDML2QTe93eU_ghxGgP55p5Ue94078iHX8"; 

        userInput.addEventListener('input', () => {
            userInput.style.height = 'auto';
            userInput.style.height = (userInput.scrollHeight) + 'px';
            const hasText = userInput.value.trim().length > 0;
            sendBtn.disabled = !hasText;
            hasText ? sendBtn.classList.add('active') : sendBtn.classList.remove('active');
        });

        function appendMessage(role, content) {
            const isAI = role === 'assistant';
            const wrapper = document.createElement('div');
            wrapper.className = `flex w-full ${!isAI ? 'justify-end' : 'justify-start'} fade-in`;
            
            wrapper.innerHTML = `
                <div class="flex max-w-[92%] gap-5 ${!isAI ? 'flex-row-reverse' : 'flex-row'}">
                    <div class="${!isAI ? 'w-8 h-8 rounded-full bg-gray-100 text-gray-400 flex items-center justify-center' : 'ai-logo-container'} shrink-0 mt-1">
                        ${!isAI 
                            ? '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>' 
                            : '<svg class="ai-logo-icon" viewBox="0 0 24 24"><path d="M12 2L14.5 9.5L22 12L14.5 14.5L12 22L9.5 14.5L2 12L9.5 9.5L12 2Z" /></svg>'}
                    </div>
                    <div class="flex flex-col ${!isAI ? 'items-end' : 'items-start'}">
                        <div class="text-[16px] leading-[1.8] p-6 px-7 rounded-[28px] ${!isAI ? 'bg-[#F4F4F4] text-[#1A1A1A] rounded-tr-none' : 'bg-white text-[#1A1A1A] rounded-tl-none border border-gray-100 shadow-sm'}">
                            <div class="whitespace-pre-wrap">${content}</div>
                        </div>
                    </div>
                </div>
            `;
            messagesList.appendChild(wrapper);
            chatContainer.scrollTo({ top: chatContainer.scrollHeight, behavior: 'smooth' });
        }

        async function handleSend() {
            const text = userInput.value.trim();
            if (!text) return;

            greetingArea.classList.add('hidden');
            messagesList.classList.remove('hidden');
            appendMessage('user', text);
            userInput.value = '';
            userInput.style.height = 'auto';
            sendBtn.disabled = true;
            sendBtn.classList.remove('active');
            aiLoading.classList.remove('hidden');
            chatContainer.scrollTo({ top: chatContainer.scrollHeight, behavior: 'smooth' });

            try {
                // SỬ DỤNG MÔ HÌNH ĐÚNG THEO API VÀ HỆ THỐNG
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: text }] }],
                        systemInstruction: { parts: [{ text: "Bạn là hệ thống tri thức Aspire AI. Quy tắc phản hồi: 1. Trả lời cực kỳ chi tiết, mang tính học thuật và khoa học sâu sắc. 2. KHÔNG sử dụng các ký tự đặc biệt lạ, biểu tượng cảm xúc (emoji), hay các ký tự trang trí không cần thiết. 3. Sử dụng cấu trúc rõ ràng, chuyên nghiệp. 4. Ngôn ngữ: Tiếng Việt chuẩn mực." }] }
                    })
                });
                
                const data = await response.json();
                const aiResponse = data.candidates?.[0]?.content?.parts?.[0]?.text || "Hệ thống không phản hồi.";
                aiLoading.classList.add('hidden');
                appendMessage('assistant', aiResponse);
            } catch (error) {
                aiLoading.classList.add('hidden');
                appendMessage('assistant', "Lỗi kết nối hệ thống.");
            }
        }

        sendBtn.addEventListener('click', handleSend);
        userInput.addEventListener('keydown', (e) => { if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); handleSend(); } });
    </script>
</body>
</html>